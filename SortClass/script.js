"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P=P||Promise)(function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):((value=result.value)instanceof P?value:new P(function(resolve){resolve(value)})).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())})},__generator=this&&this.__generator||function(thisArg,body){var f,y,t,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]},g={next:verb(0),throw:verb(1),return:verb(2)};return"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function(op){if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=0<(t=_.trys).length&&t[t.length-1])&&(6===op[0]||2===op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}};exports.__esModule=!0,exports.QuickSort=exports.InsertSort=exports.SelectSort=exports.BubbleSort=exports.Sort=void 0;var Sort=function(){function Sort(n,canvasId){this.swap=0,this.compare=0,this.temp=0,this.canvasId=canvasId,this.arr=new Array(n);for(var i=0;i<this.arr.length;i++)this.arr[i]=i+1;for(i=0;i<this.arr.length;i++){var a=this.arr[i],x=Math.floor(Math.random()*this.arr.length);this.arr[i]=this.arr[x],this.arr[x]=a}this.canvas=document.getElementById(canvasId),this.ctx=this.canvas.getContext("2d"),this.repaint()}return Sort.prototype.repaint=function(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height);for(var i=0;i<this.arr.length;i++)this.ctx.fillRect(10+3*i,150,2,-this.arr[i]);this.ctx.fillText("compare="+this.compare+" swap="+this.swap,30,190)},Sort.prototype.swapData=function(i,j){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(_a){switch(_a.label){case 0:return this.swap++,this.temp=this.arr[i],this.arr[i]=this.arr[j],this.arr[j]=this.temp,this.repaint(),[4,new Promise(function(r){return setTimeout(r,10)})];case 1:return _a.sent(),[2]}})})},Sort.prototype.compareData=function(x,y){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(_a){switch(_a.label){case 0:return this.compare++,[4,new Promise(function(r){return setTimeout(r,10)})];case 1:return _a.sent(),[2,this.arr[x]-this.arr[y]]}})})},Sort.prototype.runSort=function(){this.swap=0,this.compare=0},Sort}(),BubbleSort=function(_super){function BubbleSort(n,canvasId){return _super.call(this,n,canvasId)||this}return __extends(BubbleSort,_super),BubbleSort.prototype.runSort=function(){return __awaiter(this,void 0,void 0,function(){var sorted,i,_loop_1,this_1,j,_this=this;return __generator(this,function(_a){switch(_a.label){case 0:_super.prototype.runSort.call(this),sorted=!1,i=1,_a.label=1;case 1:if(!(i<this.arr.length)||sorted)return[3,6];sorted=!0,_loop_1=function(j){return __generator(this,function(_a){switch(_a.label){case 0:return[4,this_1.compareData(j,j-1).then(function(result){return __awaiter(_this,void 0,void 0,function(){return __generator(this,function(_a){switch(_a.label){case 0:return result<0?[4,_super.prototype.swapData.call(this,j,j-1)]:[3,2];case 1:_a.sent(),sorted=!1,_a.label=2;case 2:return[2]}})})})];case 1:return _a.sent(),[2]}})},this_1=this,j=1,_a.label=2;case 2:return j<this.arr.length-i+1?[5,_loop_1(j)]:[3,5];case 3:_a.sent(),_a.label=4;case 4:return j++,[3,2];case 5:return i++,[3,1];case 6:return[2]}})})},BubbleSort}(exports.Sort=Sort);exports.BubbleSort=BubbleSort;var SelectSort=function(_super){function SelectSort(n,canvasId){return _super.call(this,n,canvasId)||this}return __extends(SelectSort,_super),SelectSort.prototype.runSort=function(){return __awaiter(this,void 0,void 0,function(){var _loop_2,this_2,i,_this=this;return __generator(this,function(_a){switch(_a.label){case 0:_super.prototype.runSort.call(this),_loop_2=function(i){var max,_loop_3,j;return __generator(this,function(_a){switch(_a.label){case 0:max=i,_loop_3=function(j){return __generator(this,function(_a){switch(_a.label){case 0:return[4,this_2.compareData(max,j).then(function(result){result<0&&(max=j)})];case 1:return _a.sent(),[2]}})},j=0,_a.label=1;case 1:return j<i?[5,_loop_3(j)]:[3,4];case 2:_a.sent(),_a.label=3;case 3:return j++,[3,1];case 4:return this_2.compare++,[4,this_2.compareData(i,max).then(function(result){return __awaiter(_this,void 0,void 0,function(){return __generator(this,function(_a){switch(_a.label){case 0:return result<0?[4,_super.prototype.swapData.call(this,i,max)]:[3,2];case 1:_a.sent(),_a.label=2;case 2:return[2]}})})})];case 5:return _a.sent(),[2]}})},i=(this_2=this).arr.length-1,_a.label=1;case 1:return 0<i?[5,_loop_2(i)]:[3,4];case 2:_a.sent(),_a.label=3;case 3:return i--,[3,1];case 4:return[2]}})})},SelectSort}(Sort);exports.SelectSort=SelectSort;var InsertSort=function(_super){function InsertSort(n,canvasId){return _super.call(this,n,canvasId)||this}return __extends(InsertSort,_super),InsertSort.prototype.runSort=function(){return __awaiter(this,void 0,void 0,function(){var _loop_4,this_3,i,_this=this;return __generator(this,function(_a){switch(_a.label){case 0:_super.prototype.runSort.call(this),_loop_4=function(i){var j,x;return __generator(this,function(_a){switch(_a.label){case 0:j=i,x=-1,_a.label=1;case 1:return x<0?[4,this_3.compareData(j,j-1).then(function(result){return __awaiter(_this,void 0,void 0,function(){return __generator(this,function(_a){switch(_a.label){case 0:return result<0?[4,this.swapData(j,j-1)]:[3,2];case 1:_a.sent(),j--,_a.label=2;case 2:return x=result,[2]}})})})]:[3,3];case 2:return _a.sent(),[3,1];case 3:return[2]}})},this_3=this,i=1,_a.label=1;case 1:return i<this.arr.length?[5,_loop_4(i)]:[3,4];case 2:_a.sent(),_a.label=3;case 3:return i++,[3,1];case 4:return[2]}})})},InsertSort}(Sort);exports.InsertSort=InsertSort;var QuickSort=function(_super){function QuickSort(n,canvasId){return _super.call(this,n,canvasId)||this}return __extends(QuickSort,_super),QuickSort.prototype.runSort=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(_a){switch(_a.label){case 0:return _super.prototype.runSort.call(this),[4,this.quickSort(0,this.arr.length-1)];case 1:return _a.sent(),[2]}})})},QuickSort.prototype.quickSort=function(lo,hi){return __awaiter(this,void 0,void 0,function(){var pivot,l_1,h_1,x_1;return __generator(this,function(_a){switch(_a.label){case 0:if(!(lo<hi))return[3,14];pivot=Math.floor((lo+hi)/2),l_1=lo,h_1=hi,x_1=-1,_a.label=1;case 1:if(!(l_1<h_1))return[3,9];_a.label=2;case 2:return x_1<0?[4,this.compareData(pivot,h_1).then(function(result){result<0&&h_1--,x_1=result})]:[3,4];case 3:return _a.sent(),[3,2];case 4:return 0<=x_1?[4,this.compareData(pivot,l_1).then(function(result){0<=result&&l_1++,x_1=result})]:[3,6];case 5:return _a.sent(),[3,4];case 6:return l_1<h_1?(h_1==pivot&&(pivot=l_1),[4,this.swapData(l_1,h_1)]):[3,8];case 7:_a.sent(),_a.label=8;case 8:return[3,1];case 9:return pivot<h_1?[4,_super.prototype.swapData.call(this,h_1,pivot)]:[3,11];case 10:_a.sent(),pivot=h_1,_a.label=11;case 11:return[4,this.quickSort(lo,pivot-1)];case 12:return _a.sent(),[4,this.quickSort(pivot+1,hi)];case 13:_a.sent(),_a.label=14;case 14:return[2]}})})},QuickSort}(Sort);exports.QuickSort=QuickSort;