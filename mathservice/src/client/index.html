<!DOCTYPE html>
<html>

<body bgcolor="grey">
    <canvas id="chart1" width="1600" height="800" style="background-color:brown;border:1px solid" onclick="chart1.clickXY(event);"></canvas>
</body>
<!--script src='https://cdn.jsdelivr.net/npm/big.js@6.0.0/big.min.js'></script-->
<script src="http://localhost:8000/api/chart"></script>
<script>
url = 'http://localhost:8000/api/primeFile';
fetch(url)
    .then(function (response) {
        response.text().then(function (text) {
            let data = text.split('\n');
            dataX = new Array(data.length - 1);
            dataY = new Array(data.length - 1);
            let p = 0;
            let iteration = 1000;
            let x = 1;
            for (let i = 0; i < data.length - 1; i++) {
                x = Number(data[i]);
                let z = x;
                let j = 0;
                while (z > 1 && j++ < iteration) {
                    if (z % 2 == 0)
                        z = z / 2;
                   else
                        z = z * 3 + 1;
                }
                dataX[i] = x;
                dataY[i] = j;
				//histPrime[j] ++;
            }
            chart1 = new Chart('chart1', dataX, dataY);
        });
    });

</script>

</html>